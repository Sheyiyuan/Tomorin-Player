<div align="center">
  
<img src="assets/icons/appicon-256.png" alt="Tomorin Player Icon" width="120" height="120" />

# Tomorin Player

**åŸºäº Bç«™ API çš„éŸ³ä¹æ’­æ”¾å™¨**

_ä½¿ç”¨ Wails v2 æ„å»ºçš„è·¨å¹³å°æ¡Œé¢åº”ç”¨_

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Wails](https://img.shields.io/badge/Wails-v2.11-DF0039?logo=wails&logoColor=white)](https://wails.io)
[![Go](https://img.shields.io/badge/Go-1.21+-00ADD8?logo=go&logoColor=white)](https://golang.org)
[![React](https://img.shields.io/badge/React-18-61DAFB?logo=react&logoColor=black)](https://react.dev)
[![TypeScript](https://img.shields.io/badge/TypeScript-5.0-3178C6?logo=typescript&logoColor=white)](https://www.typescriptlang.org)

[åŠŸèƒ½ç‰¹æ€§](#åŠŸèƒ½ç‰¹æ€§) â€¢ [å¼€å‘ç¯å¢ƒ](#å¼€å‘ç¯å¢ƒ) â€¢ [æ‰“åŒ…æ„å»º](#æ‰“åŒ…æ„å»º) â€¢ [é¡¹ç›®ç»“æ„](#é¡¹ç›®ç»“æ„)

</div>

---

## ç®€ä»‹
<div align="center">

Tomorin Player æ˜¯ä¸€æ¬¾åŠŸèƒ½ä¸°å¯Œçš„éŸ³ä¹æ’­æ”¾å™¨ï¼Œæ”¯æŒ Bç«™æ‰«ç ç™»å½•ã€BV å·è§£æã€æ­Œå•ç®¡ç†ç­‰åŠŸèƒ½ã€‚é‡‡ç”¨ç°ä»£åŒ–æŠ€æœ¯æ ˆæ„å»ºï¼Œæä¾›æµç•…çš„ç”¨æˆ·ä½“éªŒã€‚

</div>

**æŠ€æœ¯æ ˆ**

- **åç«¯**: Go + SQLite + Wails v2
- **å‰ç«¯**: React 18 + TypeScript + Mantine UI v8
- **æ„å»º**: Vite + pnpm

**ç‰¹ç‚¹**

- è·¨å¹³å°æ”¯æŒï¼ˆmacOS / Windows / Linuxï¼‰
- ä¸»é¢˜ç³»ç»Ÿï¼ˆæµ…è‰²/æ·±è‰² + è‡ªå®šä¹‰ï¼‰
- æ— éœ€ä¾èµ– yt-dlpï¼Œç›´æ¥ä½¿ç”¨ Bç«™ API
- æœ¬åœ°æ•°æ®åº“å­˜å‚¨ï¼Œç¦»çº¿å¯ç”¨

> æœ¬é¡¹ç›®å—åˆ° [Azusa Player](https://github.com/kenmingwang/azusa-player) çš„å¯å‘

---

## åŠŸèƒ½ç‰¹æ€§

### è´¦å·ä¸ç™»å½•

- Bç«™æ‰«ç ç™»å½•
- è‡ªåŠ¨è·å–ç”¨æˆ·ä¿¡æ¯ï¼ˆå¤´åƒã€ç”¨æˆ·åï¼‰
- ç™»å½•çŠ¶æ€æŒä¹…åŒ–

### æ­Œå•ç®¡ç†

- åˆ›å»ºã€ç¼–è¾‘ã€åˆ é™¤æ­Œå•
- ä» BV å·æ·»åŠ æ­Œæ›²ï¼ˆæ”¯æŒåˆ†Pé€‰æ‹©ã€éŸ³é¢‘æˆªå–ï¼‰
- å¯¼å…¥ Bç«™ æ”¶è—å¤¹ï¼ˆé€šè¿‡ fid æˆ–ç™»å½•è´¦å·ï¼‰
- æ­Œå•å¤åˆ¶åŠŸèƒ½
- è‡ªåŠ¨æ¸…ç†æœªè¢«å¼•ç”¨çš„æ­Œæ›²

### éŸ³é¢‘æ’­æ”¾

- åŸºäº Bç«™ API çš„éŸ³é¢‘è§£æï¼ˆæ— éœ€ yt-dlpï¼‰
- æ’­æ”¾åœ°å€è‡ªåŠ¨ç¼“å­˜å’Œè¿‡æœŸåˆ·æ–°
- æ”¯æŒæ’­æ”¾åŒºé—´è®¾ç½®ï¼ˆè·³è¿‡ç‰‡å¤´ç‰‡å°¾ï¼‰
- æ’­æ”¾æ¨¡å¼åˆ‡æ¢ï¼ˆåˆ—è¡¨å¾ªç¯/éšæœº/å•æ›²å¾ªç¯ï¼‰
- è¿›åº¦æ§åˆ¶ã€éŸ³é‡è°ƒèŠ‚
- æ™ºèƒ½éŸ³é¢‘æºç®¡ç†ï¼ˆå…ƒæ•°æ®æ›´æ–°ä¸ä¸­æ–­æ’­æ”¾ï¼‰

### æœç´¢åŠŸèƒ½

- å…¨å±€æœç´¢ï¼ˆæ­Œæ›²åã€æ­Œæ‰‹ã€BVå·ï¼‰
- è¿œç¨‹æœç´¢ï¼ˆBç«™è§†é¢‘æœç´¢ï¼‰
- BV å·å¿«é€Ÿè§£æ
- å®æ—¶æœç´¢ç»“æœ

### æ­Œæ›²ç¼–è¾‘

- ç¼–è¾‘æ­Œæ›²ä¿¡æ¯ï¼ˆåç§°ã€æ­Œæ‰‹ã€å°é¢ï¼‰
- è‡ªå®šä¹‰æ’­æ”¾åŒºé—´
- æ‰‹åŠ¨è®¾ç½®æ’­æ”¾åœ°å€

### ä¸‹è½½ç®¡ç†

- æ­Œæ›²ç¦»çº¿ä¸‹è½½
- ä¸‹è½½è¿›åº¦æ˜¾ç¤º
- æ‰¹é‡ä¸‹è½½æ­Œå•
- æœ¬åœ°æ–‡ä»¶ç®¡ç†

### ä¸»é¢˜ç³»ç»Ÿ

- å†…ç½®å¤šæ¬¾ä¸»é¢˜ï¼ˆæµ…è‰²/æ·±è‰²ï¼‰
- è‡ªå®šä¹‰ä¸»é¢˜ç¼–è¾‘å™¨
- ä¸»é¢˜é¢œè‰²ã€èƒŒæ™¯å›¾ã€é€æ˜åº¦è°ƒèŠ‚
- ä¸»é¢˜å¯¼å…¥/å¯¼å‡º

### å…¶ä»–åŠŸèƒ½

- ç¼“å­˜ç®¡ç†
- éŸ³é¢‘ç¼“å­˜æ¸…ç†
- æ’­æ”¾åˆ—è¡¨å¯è§†åŒ–ç¼–è¾‘
- æ‹–æ‹½æ’åº

---

## æ›´æ–°æ—¥å¿—

### v1.1.0 (2025-12-27)

#### ğŸ”§ é‡æ„ä¼˜åŒ–

**åç«¯æ¶æ„é‡æ„**
- æ‹†åˆ† 1547 è¡Œçš„ `service.go` ä¸º 11 ä¸ªåŸŸæ–‡ä»¶ï¼Œæé«˜ä»£ç å¯ç»´æŠ¤æ€§
  - `songs.go` - æ­Œæ›² CRUD æ“ä½œ
  - `favorites.go` - æ­Œå•ç®¡ç†
  - `library.go` - åº“å¯¼å…¥/å¯¼å‡º/æ¸…ç†
  - `settings.go` - æ’­æ”¾è®¾ç½®å’Œä¸»é¢˜ç³»ç»Ÿ
  - `playlist.go` - æ’­æ”¾é˜Ÿåˆ—çŠ¶æ€ç®¡ç†
  - `lyrics.go` - æ­Œè¯æ˜ å°„
  - `login.go` - Bç«™ç™»å½•å’Œä¼šè¯ç®¡ç†
  - `bili_play.go` - Bç«™éŸ³é¢‘è§£æ
  - `bili_favorite.go` - Bç«™æ”¶è—å¤¹ API
  - `search.go` - æœç´¢åŠŸèƒ½
  - `service.go` - ç²¾ç®€ä¸ºæ ¸å¿ƒç»“æ„ä½“

#### ğŸ“Š ç‰¹ç‚¹

- ä¿æŒå…¬å…± API å®Œå…¨å…¼å®¹ï¼Œæ— éœ€æ”¹åŠ¨å‰ç«¯ä»£ç 
- æ¯ä¸ªæ–‡ä»¶æ§åˆ¶åœ¨ 80-300 è¡Œï¼Œä¾¿äºå¿«é€Ÿå®šä½å’Œä¿®æ”¹
- ä¾¿äºåç»­åŠŸèƒ½æ‰©å±•å’Œæµ‹è¯•ç¼–å†™

#### ğŸ”¨ æŠ€æœ¯ç»†èŠ‚

- æ‰€æœ‰åŸŸæ–‡ä»¶å…±äº« `*Service` æ¥æ”¶å™¨ï¼Œç¡®ä¿çŠ¶æ€ä¸€è‡´æ€§
- é€šè¿‡ `gorm.DB`ã€`http.Client` ç­‰å…±äº«å­—æ®µå®ç°è·¨æ¨¡å—é€šä¿¡
- å¯¼å…¥/å¯¼å‡ºé€»è¾‘é›†ä¸­ç®¡ç†ï¼Œé¿å…å¾ªç¯ä¾èµ–

---

## å¼€å‘ç¯å¢ƒ

### å‰ç½®è¦æ±‚

- **Go** 1.21+
- **Node.js** 18+
- **pnpm** (æ¨è) æˆ– npm
- **Wails CLI**: `go install github.com/wailsapp/wails/v2/cmd/wails@latest`

### å®‰è£…ä¾èµ–

```bash
# åç«¯ä¾èµ–
go mod tidy

# å‰ç«¯ä¾èµ–
cd frontend
pnpm install
```

### å¼€å‘æ¨¡å¼

```bash
# å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼ˆçƒ­é‡è½½ï¼‰
wails dev
```

æˆ–è€…åˆ†åˆ«å¯åŠ¨å‰åç«¯ï¼š

```bash
# ç»ˆç«¯ 1: å‰ç«¯å¼€å‘æœåŠ¡å™¨
cd frontend
pnpm dev

# ç»ˆç«¯ 2: Wails åç«¯
wails dev
```

---

## æ‰“åŒ…æ„å»º

### macOS

```bash
# æ„å»º macOS åº”ç”¨
wails build

# è¾“å‡ºä½ç½®
# build/bin/Tomorin Player.app
```

### Windows

```bash
# æ„å»º Windows åº”ç”¨
wails build -platform windows/amd64

# è¾“å‡ºä½ç½®
# build/bin/Tomorin Player.exe
```

### Linux

```bash
# æ„å»º Linux åº”ç”¨
wails build -platform linux/amd64

# è¾“å‡ºä½ç½®
# build/bin/tomorin-player
```

### Debian 13 æ‰“åŒ… (.deb)

#### 1. å®‰è£…ç³»ç»Ÿä¾èµ–

```bash
# å®‰è£… Wails CLI
go install github.com/wailsapp/wails/v2/cmd/wails@latest

# å®‰è£…æ„å»ºä¾èµ–ï¼ˆæ³¨æ„ï¼šDebian 13 ä½¿ç”¨ webkit2gtk-4.1ï¼‰
sudo apt install -y libgtk-3-dev libwebkit2gtk-4.1-dev

# åˆ›å»ºå…¼å®¹æ€§è½¯é“¾æ¥ï¼ˆWails éœ€è¦ webkit2gtk-4.0ï¼‰
sudo ln -s /usr/lib/x86_64-linux-gnu/pkgconfig/webkit2gtk-4.1.pc \
           /usr/lib/x86_64-linux-gnu/pkgconfig/webkit2gtk-4.0.pc
```

#### 2. æ„å»ºå‰ç«¯èµ„æº

```bash
cd frontend
pnpm install
pnpm run build
cd ..
```

#### 3. æ„å»ºåº”ç”¨ç¨‹åº

```bash
~/go/bin/wails build
```

#### 4. åˆ›å»º .deb åŒ…ç»“æ„

```bash
# åˆ›å»ºç›®å½•ç»“æ„
mkdir -p build/deb/tomorin-player_1.0.0_amd64/{DEBIAN,usr/bin,usr/share/applications,usr/share/icons/hicolor/256x256/apps,usr/share/doc/tomorin-player}

# å¤åˆ¶æ–‡ä»¶
cp build/bin/tomorin-player build/deb/tomorin-player_1.0.0_amd64/usr/bin/
cp assets/icons/appicon-256.png build/deb/tomorin-player_1.0.0_amd64/usr/share/icons/hicolor/256x256/apps/tomorin-player.png

# è®¾ç½®æƒé™
chmod 755 build/deb/tomorin-player_1.0.0_amd64/usr/bin/tomorin-player
chmod 644 build/deb/tomorin-player_1.0.0_amd64/usr/share/icons/hicolor/256x256/apps/tomorin-player.png
```

#### 5. åˆ›å»ºæ§åˆ¶æ–‡ä»¶

åœ¨ `build/deb/tomorin-player_1.0.0_amd64/DEBIAN/control` åˆ›å»ºï¼š

```
Package: tomorin-player
Version: 1.0.0
Section: sound
Priority: optional
Architecture: amd64
Depends: libgtk-3-0, libwebkit2gtk-4.1-0
Maintainer: Sheyiyuan <sheyiyuantan90@qq.com>
Description: æ›´å¥½çš„ bilibili éŸ³ä¹æ’­æ”¾å™¨
 Tomorin Player æ˜¯ä¸€ä¸ªåŸºäº Bç«™ API çš„éŸ³ä¹æ’­æ”¾å™¨ï¼Œ
 æ”¯æŒæ‰«ç ç™»å½•ã€BV å·è§£æã€éŸ³é¢‘æ’­æ”¾å’Œæ­Œå•ç®¡ç†ã€‚
Homepage: https://github.com/Sheyiyuan/Tomorin-Player
```

åˆ›å»ºæ¡Œé¢å¿«æ·æ–¹å¼ `build/deb/tomorin-player_1.0.0_amd64/usr/share/applications/tomorin-player.desktop`:

```ini
[Desktop Entry]
Name=Tomorin Player
Comment=æ›´å¥½çš„ bilibili éŸ³ä¹æ’­æ”¾å™¨
Exec=/usr/bin/tomorin-player
Icon=tomorin-player
Terminal=false
Type=Application
Categories=AudioVideo;Audio;Player;
```

#### 6. æ„å»º .deb åŒ…

```bash
cd build/deb
dpkg-deb --build --root-owner-group tomorin-player_1.0.0_amd64
```

#### 7. å®‰è£…æµ‹è¯•

```bash
sudo dpkg -i tomorin-player_1.0.0_amd64.deb

# å¦‚æœ‰ä¾èµ–é—®é¢˜
sudo apt-get install -f
```

ç”Ÿæˆçš„ .deb åŒ…çº¦ 4.9 MBï¼ŒåŒ…å«å®Œæ•´çš„å‰ç«¯èµ„æºå’Œå¯æ‰§è¡Œæ–‡ä»¶ã€‚

### æ„å»ºé€‰é¡¹

```bash
# ç”Ÿäº§æ„å»ºï¼ˆå‹ç¼©ä¼˜åŒ–ï¼‰
wails build -clean

# è·³è¿‡å‰ç«¯æ„å»ºï¼ˆåŠ é€Ÿï¼‰
wails build -skipbindings

# è‡ªå®šä¹‰è¾“å‡ºç›®å½•
wails build -o custom-output-name
```

---

## é¡¹ç›®ç»“æ„

```
tomorin/
â”œâ”€â”€ main.go                 # Wails å…¥å£
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ db/                # æ•°æ®åº“åˆå§‹åŒ–
â”‚   â”œâ”€â”€ models/            # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/          # ä¸šåŠ¡é€»è¾‘ï¼ˆæ’­æ”¾ã€æ”¶è—å¤¹ã€ä¸‹è½½ç­‰ï¼‰
â”‚   â””â”€â”€ proxy/             # HTTP ä»£ç†é…ç½®
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/    # React ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ hooks/         # è‡ªå®šä¹‰ Hooks
â”‚   â”‚   â”œâ”€â”€ context/       # React Context
â”‚   â”‚   â”œâ”€â”€ utils/         # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ types.ts       # TypeScript ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ wailsjs/           # Wails è‡ªåŠ¨ç”Ÿæˆçš„ç»‘å®š
â”œâ”€â”€ build/                 # æ„å»ºè¾“å‡º
â””â”€â”€ wails.json            # Wails é…ç½®
```

---

## è®¸å¯è¯

MIT License

---

<div align="center">

**Made with love by Sheyiyuan**

å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹ä½ æœ‰å¸®åŠ©ï¼Œè¯·ç»™ä¸€ä¸ª Starï¼

</div>
